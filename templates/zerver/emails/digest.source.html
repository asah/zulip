{% extends "zerver/emails/email_base_messages.html" %}

{% block content %}
    <div style="width:100%">
      <div style="float:left"><img src="data:image/png;base64,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" alt="forecast.chat logo"></div>
      <div style="float:left;text-align:left">
        <div style="font-size:18px;margin-top:8px"><b><a href="https://forecast.chat/">forecast.chat</a></b></div>
        <div style="font-size:13px;margin-top:-7px">prognostications for the future</div>
      </div>
      <div style="clear:both"></div>
    </div>
    <div>
    {% if top_reacted_msgs %}
    <p style="font-family:sans-serif; font-size:14px; font-weight:normal; margin:10px 0"><b>Most-reacted messages</b></p>
        <div class='messages'>
            {% for msg in top_reacted_msgs %}
            <div class='hot_convo_recipient_block'>
                <!-- SC: {{ msg.num_reactions }} / {{ msg.weighted_num_reactions }} / {{ msg.lnlen }} / {{ msg.score }} -->
                <div class='hot_convo_recipient_header'>
                    {{ msg.stream_name }} | 
                    <a href="{{ msg.near_message_url }}">{{ msg.subject }}</a>
                </div>
                <div class='hot_convo_message_content_block'>
                    {{ msg.rendered_content_truncated|replace('<div>', '<div style="margin-top:-10px">')|safe }}
                </div>
            </div>
            {% endfor %}
        </div>
    {% endif %}
    {% if veryhot_conversations %}
    <hr/>
        <p style="font-family:sans-serif; font-size:14px; font-weight:normal; margin:10px 0"><b>New in the past day</b></p>
        {% for convo in veryhot_conversations %}
        <div class='messages'>
            {% for recipient_block in convo.first_few_messages %}
                <div class='hot_convo_recipient_block'>
                    <div class='hot_convo_recipient_header'>{{ recipient_block.header.html|safe }}</div>
                    <div class='hot_convo_message_content'>
                        {% for sender_block in recipient_block.senders %}
                            {% for message_block in sender_block.content %}
                            <div class='hot_convo_message_content_block'>
                                {{ message_block.html|replace('<div>', '<div style="margin-top:-10px">')|safe }}
                            </div>
                            {% endfor %}
                        {% endfor %}
                    </div>
                </div>
                {% if convo.count > 0 %}<p class="moremessages"><a href="{{ realm_uri }}"> + {{ convo.count }} more message{{ convo.count|pluralize }} by {{ convo.participants|display_list(4) }}.</a></p>{% endif %}
            {% endfor %}
        </div>
        {% endfor %}
    {% endif %}

    {% if hot_conversations %}
    {% if veryhot_conversations %}
        <hr/>
        <p style="font-family:sans-serif; font-size:14px; font-weight:normal; margin:10px 0"><b>Older messages</b></p>
        {% endif %}

        {% for convo in hot_conversations %}
        <div class='messages'>
            {% for recipient_block in convo.first_few_messages %}
                <div class='hot_convo_recipient_block'>
                    <div class='hot_convo_recipient_header'>{{ recipient_block.header.html|safe }}</div>
                    <div class='hot_convo_message_content'>
                        {% for sender_block in recipient_block.senders %}
                            {% for message_block in sender_block.content %}
                            <div class='hot_convo_message_content_block'>
                                {{ message_block.html|replace('<div>', '<div style="margin-top:-10px">')|safe }}
                            </div>
                            {% endfor %}
                        {% endfor %}
                    </div>
                </div>
                {% if convo.count > 0 %}<p class="moremessages"><a href="{{ realm_uri }}"> + {{ convo.count }} more message{{ convo.count|pluralize }} by {{ convo.participants|display_list(4) }}.</a></p>{% endif %}
            {% endfor %}
        </div>
        {% endfor %}
    {% endif %}

    {% if new_streams.html %}
    <p><b>{% trans %}New streams{% endtrans %}</b></p>

    <p>{{ new_streams.html|display_list(1000)|safe }}.</p>
    {% endif %}

    <br />

    <p><a href="{{ realm_uri }}">{% trans %}Catch up by visiting Forecast.chat!{% endtrans %}</a></p>
{% endblock %}

{% block manage_preferences %}
<p>
    <a href="{{ realm_uri }}/#settings/notifications">{% trans %}Manage email preferences{% endtrans %}</a> |
    <a href="{{ unsubscribe_link }}">{% trans %}Unsubscribe from digest emails{% endtrans %}</a>
</p>
{% endblock %}

